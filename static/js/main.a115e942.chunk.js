(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[0],{17:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);n(17);var r=n(0),i=n(12),c=n.n(i),a=n(4),s=n(5),o=n(7),u=n(6),l=(n(22),n(8)),p=["default","red","green","orange","blue","magenta"],m=n(9),h=n(2),d=n.n(h),f=n(3),j=n(11),b=n(31),O="Title",v="Project",x="default",g="timers";function y(){return JSON.parse(localStorage.getItem(g))||[]}function w(e){localStorage.setItem(g,JSON.stringify(e))}function C(){return(C=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y(),e.next=3,new Promise((function(e){return setTimeout(e,0)}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:t.title||O,project:t.project||v,color:t.color||x,id:Object(b.a)(),elapsed:0,runningSince:null},w([t].concat(Object(j.a)(y()))),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(l.a)(Object(l.a)({},t),{},{title:t.title||O,project:t.project||v}),n=y(),r=n.findIndex((function(e){return e.id===t.id})),n[r]=t,w(n),e.next=7,new Promise((function(e){return setTimeout(e,0)}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(f.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(y().filter((function(e){return e.id!==t}))),e.next=4,new Promise((function(e){return setTimeout(e,0)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),r={},w(y().map((function(e){return e.id===t?r=Object(l.a)(Object(l.a)({},e),{},{runningSince:n}):e}))),e.next=6,new Promise((function(e){return setTimeout(e,0)}));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),r={},w(y().map((function(e){if(e.id===t){var i=n-e.runningSince;return r=Object(l.a)(Object(l.a)({},e),{},{elapsed:e.elapsed+i,runningSince:null})}return e}))),e.next=6,new Promise((function(e){return setTimeout(e,0)}));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},w(y().map((function(e){return e.id===t?n=Object(l.a)(Object(l.a)({},e),{},{elapsed:0,runningSince:null}):e}))),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I={fetchTimers:function(){return C.apply(this,arguments)},createTimer:function(e){return k.apply(this,arguments)},updateTimer:function(e){return T.apply(this,arguments)},deleteTimer:function(e){return S.apply(this,arguments)},startTimer:function(e){return N.apply(this,arguments)},stopTimer:function(e){return F.apply(this,arguments)},resetTimer:function(e){return E.apply(this,arguments)}},D="change-theme-action",A="get-theme-action",_="fetch-timers-action",P="create-timer-action",U="delete-timer-action",R="update-timer-action",L="start-timer-action",M="stop-timer-action",B="reset-timer-action",J=n(1),X=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={title:e.props.timer.title||"",project:e.props.timer.project||"",color:e.props.timer.color||p[0]},e.handleTitleChange=function(t){return e.setState({title:t.target.value})},e.handleProjectChange=function(t){return e.setState({project:t.target.value})},e.handleColorChange=function(t){return e.setState({color:t.target.value})},e.handleSubmit=function(){var t=Object(l.a)(Object(l.a)({},e.props.timer),{},{title:e.state.title,project:e.state.project,color:e.state.color});t.id?e.props.updateTimer(t):e.props.createTimer(t),e.props.onSubmit()},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props.timer,n=t.id?"Update":"Create";return Object(J.jsxs)("div",{className:"timer-form card",children:[Object(J.jsxs)("div",{className:"field",children:[Object(J.jsx)("label",{children:"Title"}),Object(J.jsx)("input",{type:"text",value:this.state.title,onChange:this.handleTitleChange})]}),Object(J.jsxs)("div",{className:"field",children:[Object(J.jsx)("label",{children:"Project"}),Object(J.jsx)("input",{type:"text",value:this.state.project,onChange:this.handleProjectChange})]}),Object(J.jsxs)("div",{className:"field color-field",children:[Object(J.jsx)("label",{children:"Color"}),Object(J.jsx)("div",{className:"colors-list",children:p.map((function(r){return Object(J.jsx)("input",{title:r,name:"".concat(n.toLowerCase(),"-").concat(t.id||"empty"),type:"radio",className:"color",style:{background:r.value,"--color":"var(--color-timer-".concat(r,")")},value:r,checked:r===e.state.color,onChange:e.handleColorChange},r)}))})]}),Object(J.jsxs)("div",{className:"btns",children:[Object(J.jsx)("button",{className:"btn submit-btn",onClick:this.handleSubmit,children:n}),Object(J.jsx)("button",{className:"btn cancel-btn",onClick:this.props.onCancel,children:"Cancel"})]})]})}}]),n}(r.Component),V=Object(m.b)(null,{createTimer:function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.createTimer(e);case 2:r=t.sent,n({type:P,timer:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateTimer:function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.updateTimer(e);case 2:r=t.sent,n({type:R,timer:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(X),W=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isFormOpen:!1},e.handleCreateClick=function(t){e.setState({isFormOpen:!1})},e.handleCancelClick=function(){e.setState({isFormOpen:!1})},e.handleAddClick=function(){e.setState({isFormOpen:!0})},e}return Object(s.a)(n,[{key:"render",value:function(){return this.state.isFormOpen?Object(J.jsx)(V,{timer:{},onSubmit:this.handleCreateClick,onCancel:this.handleCancelClick}):Object(J.jsx)("button",{className:"add-timer-btn",onClick:this.handleAddClick,children:Object(J.jsx)("i",{className:"icon icon-plus"})})}}]),n}(r.Component);var q={renderElapsedString:function(e,t){var n=e;return t&&(n+=Date.now()-t),function(e){var t=Math.floor(e/1e3/60/60),n=Math.floor(e/1e3/60%60),r=Math.floor(e/1e3%60),i=function(e){return e<10?"0".concat(e):e};return"".concat(i(t),":").concat(i(n),":").concat(i(r))}(n)}},z=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderActionButton=function(e,t,n){return Object(J.jsx)("button",{className:t,onClick:n,children:e})},e}return Object(s.a)(n,[{key:"render",value:function(){return this.props.timerIsRunning?this.renderActionButton("Stop","timer-action-btn stop",this.props.onStopClick):this.renderActionButton("Start","timer-action-btn start",this.props.onStartClick)}}]),n}(r.Component),G=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).deleteTimer=function(){window.confirm("Delete timer ?")&&e.props.deleteTimer(e.props.timer.id)},e.startTimer=function(){e.props.startTimer(e.props.timer.id)},e.stopTimer=function(){e.props.stopTimer(e.props.timer.id)},e.resetTimer=function(){window.confirm("Reset timer ?")&&e.props.resetTimer(e.props.timer.id)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.forceUpdateInterval=setInterval((function(){return e.forceUpdate()}),50)}},{key:"componentWillUnmount",value:function(){clearInterval(this.forceUpdateInterval)}},{key:"render",value:function(){var e=this.props.timer,t=q.renderElapsedString(e.elapsed,e.runningSince),n={"--color-timer":"var(--color-timer-".concat(e.color,")")};return Object(J.jsxs)("div",{className:"timer card",style:n,children:[Object(J.jsxs)("div",{className:"header",children:[Object(J.jsx)("b",{className:"title",children:e.title}),Object(J.jsx)("span",{className:"project",children:e.project})]}),Object(J.jsx)("div",{className:"time",children:Object(J.jsx)("h2",{children:t})}),Object(J.jsxs)("div",{className:"edit-delete-reset-btns",children:[Object(J.jsx)("button",{title:"Edit timer",className:"btn edit-btn",onClick:this.props.onEditClick}),Object(J.jsx)("button",{title:"Delete timer",className:"btn delete-btn",onClick:this.deleteTimer}),Object(J.jsx)("button",{title:"Reset timer",className:"btn reset-btn",onClick:this.resetTimer})]}),Object(J.jsx)(z,{timerIsRunning:!!e.runningSince,onStartClick:this.startTimer,onStopClick:this.stopTimer})]})}}]),n}(r.Component),H=Object(m.b)(null,{deleteTimer:function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.deleteTimer(e);case 2:n({type:U,timerID:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},startTimer:function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.startTimer(e);case 2:r=t.sent,n({type:L,timer:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},stopTimer:function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.stopTimer(e);case 2:r=t.sent,n({type:M,timer:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},resetTimer:function(e){return function(){var t=Object(f.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.resetTimer(e);case 2:r=t.sent,n({type:B,timer:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(G),K=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={isFormOpen:!1},e.handleUpdateClick=function(t){e.setState({isFormOpen:!1})},e.handleCancelClick=function(){e.setState({isFormOpen:!1})},e.handleEditClick=function(){e.setState({isFormOpen:!0})},e}return Object(s.a)(n,[{key:"render",value:function(){return this.state.isFormOpen?Object(J.jsx)(V,{timer:this.props.timer,onSubmit:this.handleUpdateClick,onCancel:this.handleCancelClick}):Object(J.jsx)(H,{timer:this.props.timer,onEditClick:this.handleEditClick})}}]),n}(r.Component),Q=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.timers;return Object(J.jsxs)("div",{className:"editable-timer-list",children:[Object(J.jsx)(W,{}),e.map((function(e){return Object(J.jsx)(K,{timer:e},e.id)}))]})}}]),n}(r.Component),Y={all:function(){return!0},running:function(e){return!!e.runningSince},stopped:function(e){return!e.runningSince}},Z=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={timersFilter:Y.all},e.changeFilter=function(t){e.setState({timersFilter:t})},e.renderFilter=function(t,n,r){return Object(J.jsxs)("div",{className:"filter ".concat(r===e.state.timersFilter?"active":""),onClick:function(){return e.changeFilter(r)},children:[Object(J.jsx)("span",{className:"label",children:t}),Object(J.jsx)("span",{className:"count",children:n})]})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.getTheme(),this.props.fetchTimers()}},{key:"render",value:function(){var e=this,t=this.props.timers,n=t.length,r=t.filter(Y.running).length,i=t.filter(Y.stopped).length,c=this.props.theme,a="light"===c?"dark":"light";return document.body.classList.value="",document.body.classList.add("theme-"+c),Object(J.jsx)("div",{className:"app",children:Object(J.jsxs)("div",{className:"container",children:[Object(J.jsxs)("div",{className:"app-header",children:[Object(J.jsx)("h3",{children:"Timers tracker"}),Object(J.jsxs)("div",{className:"filters",children:[this.renderFilter("All",n,Y.all),this.renderFilter("Running",r,Y.running),this.renderFilter("Stopped",i,Y.stopped)]}),Object(J.jsx)("button",{title:"Switch to ".concat(a," theme"),className:"icon icon-theme theme-".concat(c),onClick:function(){return e.props.changeTheme(a)}})]}),Object(J.jsx)(Q,{timers:t.filter(this.state.timersFilter)})]})})}}]),n}(r.Component),$=Object(m.b)((function(e){return{timers:e.timers,theme:e.theme}}),{fetchTimers:function(){return function(){var e=Object(f.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.fetchTimers();case 2:n=e.sent,t({type:_,timers:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getTheme:function(){var e=window.localStorage.getItem("theme")||"light";return{type:A,theme:e}},changeTheme:function(e){return window.localStorage.setItem("theme",e),{type:D,theme:e}}})(Z),ee=n(10),te=n(16);function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.map((function(e){return e.id===t.id?t:e}));return n}var re=Object(ee.b)({theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:case A:return t.theme;default:return e}},timers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:var n=t.timers;return n;case P:return[t.timer].concat(Object(j.a)(e));case U:return Object(j.a)(e).filter((function(e){return e.id!==t.timerID}));case R:case L:case M:case B:return ne(e,t.timer);default:return e}}}),ie=[Object(ee.a)(te.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}],ce=Object(ee.d)(re,void 0,ee.c.apply(void 0,ie));c.a.render(Object(J.jsx)(m.a,{store:ce,children:Object(J.jsx)($,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.a115e942.chunk.js.map